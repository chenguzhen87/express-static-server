(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e60b4ddc"],{"031a":function(e,t,i){"use strict";i.r(t);var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-card",{attrs:{shadow:"hover"}},[i("div",{staticClass:"basic-box"},[i("div",{staticClass:"avatar-box",on:{click:e.openUploadDialog}},[i("avatar",{attrs:{name:e.user_abbr,headIcon:e.user_headicon,bgColor:e.user_backcolor}}),e._v(" "),i("div",{staticClass:"change"},[e._v("更换")])],1),e._v(" "),i("div",{staticClass:"item"},[e._v("用户名："+e._s(e.account))]),e._v(" "),i("div",{staticClass:"item"},[e._v("加入时间："),i("span",[e._v(e._s(e.ptime))])]),e._v(" "),i("div",{staticClass:"item"},[e._v("邮箱："),i("span",[e._v("Htest001@beehub.com")])]),e._v(" "),i("div",{staticClass:"item"},[e._v("头像背景色：\n                 "),e._l(e.user_bg_list,function(t,o){return i("span",{key:o,staticClass:"user_bg",style:{background:t},on:{click:function(t){return e.addUserBgColor(o)}}},[e.user_backcolor==e.user_bg_list[o]?i("i",{staticClass:"el-icon-check",staticStyle:{color:"#fff",position:"relative",left:"8px",top:"8px"}}):e._e()])})],2),e._v(" "),i("div",{staticClass:"item"},[e._v("\n                昵称：\n                "),i("el-input",{staticClass:"nickInput",attrs:{size:"small",placeholder:"昵称不能为空且大于3位",value:e.user_name},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.changenick(t)}},model:{value:e.user_name,callback:function(t){e.user_name=t},expression:"user_name"}})],1),e._v(" "),i("div",{staticClass:"item"},[i("el-button",{attrs:{type:"primary",loading:e.loading},nativeOn:{click:function(t){return t.preventDefault(),e.changenick(t)}}},[e._v("确定")])],1)]),e._v(" "),i("el-dialog",{attrs:{title:"图片上传",visible:e.dialogTableVisible},on:{"update:visible":function(t){e.dialogTableVisible=t}}},[i("div",{staticStyle:{"margin-bottom":"20px"}},[e._v("\n                图片上传\n                 "),i("label",{attrs:{for:"uploads"}},[i("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.uploadFileBtn}},[e._v("\n                        选择图片\n                    ")])],1),e._v(" "),i("input",{ref:"uploads",staticStyle:{position:"absolute",clip:"rect(0 0 0 0)"},attrs:{type:"file",id:"uploads",accept:"image/png, image/jpeg, image/gif, image/jpg"},on:{change:function(t){return e.uploadImg(t,1)}}})]),e._v(" "),i("el-row",{attrs:{gutter:20}},[i("el-col",{attrs:{span:20}},[i("div",{staticStyle:{height:"400px"}},[i("vue-cropper",{ref:"cropper",attrs:{img:e.option.img,outputSize:e.option.size,outputType:e.option.outputType,info:!0,full:e.option.full,canMove:e.option.canMove,canMoveBox:e.option.canMoveBox,fixedBox:e.option.fixedBox,original:e.option.original,autoCrop:e.option.autoCrop,autoCropWidth:e.option.autoCropWidth,autoCropHeight:e.option.autoCropHeight,centerBox:e.option.centerBox,high:e.option.high,infoTrue:e.option.infoTrue,maxImgSize:e.option.maxImageSize,enlarge:e.option.enlarge,mode:e.option.mode},on:{realTime:e.realTime,imgLoad:e.imgLoad,cropMoving:e.cropMoving}})],1)]),e._v(" "),i("el-col",{attrs:{span:4}},[i("div",{staticClass:"show-preview",style:{width:e.previews.w+"px",height:e.previews.h+"px",overflow:"hidden",margin:"5px"}},[i("div",{style:e.previews.div},[i("img",{style:e.previews.img,attrs:{src:e.previews.url}})])])])],1),e._v(" "),i("div",{staticClass:"btn-group-cropper"},[i("el-row",{attrs:{gutter:20}},[i("el-col",{attrs:{span:20}},[i("el-row",{attrs:{gutter:20}},[i("el-col",{attrs:{span:12}},[i("el-button",{attrs:{size:"small",icon:"el-icon-refresh-left"},on:{click:e.rotateLeft}},[e._v("向左旋转")]),e._v(" "),i("el-button",{attrs:{size:"small",icon:"el-icon-refresh-right"},on:{click:e.rotateRight}},[e._v("向右旋转")])],1),e._v(" "),i("el-col",{staticStyle:{"text-align":"right"},attrs:{span:12}},[i("el-button",{attrs:{size:"small",icon:"el-icon-refresh"},on:{click:e.refreshCrop}},[e._v("刷新")]),e._v(" "),i("el-button",{attrs:{size:"small",icon:"el-icon-zoom-in"},on:{click:function(t){return e.changeScale(1)}}},[e._v("放大")]),e._v(" "),i("el-button",{attrs:{size:"small",icon:"el-icon-zoom-out"},on:{click:function(t){return e.changeScale(-1)}}},[e._v("缩小")])],1)],1)],1),e._v(" "),i("el-col",{staticStyle:{"text-align":"center"},attrs:{span:4}},[i("el-button",{attrs:{size:"small",type:"primary",loading:e.loading},on:{click:e.saveHeadIcon}},[e._v("保存头像")])],1)],1)],1)],1)],1)},a=[],n=i("3d92"),s=i("e20c"),r=i("77c0"),c=i("2540"),l=i("4c99"),u=(i("05fd"),{name:"BasicDoc",components:{Avatar:r["a"],VueCropper:l["VueCropper"]},data:function(){return{loading:!1,dialogTableVisible:!1,user_bg_list:["#FF7765","#FFB800","#2FC9AE","#169BD5","#556D84","#8400FF"],previews:{},option:{img:"",size:1,full:!1,outputType:"png",canMove:!0,fixedBox:!0,original:!1,canMoveBox:!0,autoCrop:!0,autoCropWidth:120,autoCropHeight:120,fixed:!0,fixedNumber:[1,1],centerBox:!1,high:!1,cropData:{},enlarge:1,mode:"contain",maxImgSize:2e3}}},computed:Object(s["a"])({},Object(c["c"])({user_abbr:function(e){return e.user.user.user_abbr},user_name:function(e){return e.user.user.user_name},user_backcolor:function(e){return e.user.user.user_backcolor},user_headicon:function(e){return e.user.user.user_headicon},account:function(e){return e.user.user.account},ptime:function(e){return e.user.user.ptime}})),methods:{addUserBgColor:function(e){var t=this;this.$store.dispatch("user/changenick",{user_name:this.user_name,user_backcolor:this.user_bg_list[e]}).then(function(){t.loading=!1,t.$message({message:"更新成功！",type:"success"}),t.$store.dispatch("user/getuser")}).catch(function(){t.loading=!1})},openUploadDialog:function(){this.dialogTableVisible=!0},uploadFileBtn:function(){this.$refs.uploads.click()},refreshCrop:function(){this.$refs.cropper.refresh()},rotateLeft:function(){this.$refs.cropper.rotateLeft()},rotateRight:function(){this.$refs.cropper.rotateRight()},changeScale:function(e){e=e||1,this.$refs.cropper.changeScale(e)},uploadImg:function(e,t){var i=this,o=e.target.files[0];if(!/\.(gif|jpg|jpeg|png|bmp|GIF|JPG|PNG)$/.test(e.target.value))return this.$message({message:"图片类型必须是.gif,jpeg,jpg,png,bmp中的一种",type:"warn"}),!1;var a=new FileReader;a.onload=function(e){var o;o="object"===Object(n["a"])(e.target.result)?window.URL.createObjectURL(new Blob([e.target.result])):e.target.result,1===t&&(i.option.img=o)},a.readAsArrayBuffer(o)},realTime:function(e){this.previews=e},imgLoad:function(e){console.log(e)},cropMoving:function(e){this.option.cropData=e},saveHeadIcon:function(){var e=this;this.$refs.cropper.getCropData(function(t){console.log("xxxxxxxxxxxxxxxxxxxxxxxxx data ",t,Object(n["a"])(t)),e.loading=!0,e.$store.dispatch("user/changeheadicon",{user_headicon:t}).then(function(){e.loading=!1,e.dialogTableVisible=!1,e.$message({message:"更新成功！",type:"success"})}).catch(function(){e.loading=!1})})},changenick:function(){var e=this;if(this.user_name&&this.user_name.length>3){var t=/^[\u4e00-\u9fa5_a-zA-Z]*$/,i=t.test(this.user_name);if(i){this.loading=!0;this.$store.dispatch("user/changenick",{user_name:this.user_name,user_backcolor:this.user_backcolor}).then(function(){e.loading=!1,e.$message({message:"更新成功！",type:"success"})}).catch(function(){e.loading=!1})}else this.$message({message:"昵称只支持中文，英文字母，下划线",type:"error"})}else this.$message({message:"昵称不能为空且大于3位",type:"error"})}}}),p=u,g=(i("9527"),i("17cc")),d=Object(g["a"])(p,o,a,!1,null,"5ce758c0",null);t["default"]=d.exports},"05fd":function(e,t,i){e.exports=i.p+"static/img/networkdoesnotforce.07d9d586.png"},9527:function(e,t,i){"use strict";var o=i("ea4c"),a=i.n(o);a.a},ea4c:function(e,t,i){}}]);
//# sourceMappingURL=chunk-e60b4ddc.4f205b8b.js.map