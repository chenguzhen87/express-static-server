(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-185f4bab"],{1428:function(t,e,a){"use strict";var s=a("2319"),n=a.n(s);n.a},2319:function(t,e,a){},"4f7c":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("breadcrumb-box"),t._v(" "),a("el-card",{staticStyle:{"margin-top":"15px"},attrs:{shadow:"hover"}},[a("div",{staticClass:"w750"},[a("el-row",[a("el-col",{attrs:{span:16}},[a("el-radio-group",{attrs:{size:"small"},on:{change:t.change},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-radio-button",{attrs:{label:0}},[t._v("全部")]),t._v(" "),a("el-radio-button",{attrs:{label:1}},[t._v("未读 "+t._s(t.message.new_count))])],1)],1),t._v(" "),a("el-col",{staticStyle:{"text-align":"right","padding-right":"15px"},attrs:{span:8}},[a("el-button",{attrs:{type:"text"},on:{click:t.batchIsRead}},[t._v("批量已读")]),t._v(" "),a("el-button",{attrs:{type:"text"},on:{click:t.batchDel}},[t._v("批量删除")])],1)],1),t._v(" "),a("div",{staticStyle:{"margin-top":"10px","min-height":"400px"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{"show-header":!1,data:t.message.list}},[a("el-table-column",{attrs:{label:"消息标题"},scopedSlots:t._u([{key:"default",fn:function(e){return["system"==e.row.msg_type?["passwordwrong"===e.row.action_type?a("div",[t._v("\n                    您的登录密码错误，请重新输入\n                  ")]):t._e(),t._v(" "),"answerwrong"===e.row.action_type?a("div",[t._v("\n                    您的验证问题错误，请重新输入\n                  ")]):t._e(),t._v(" "),"passwordchanged"===e.row.action_type?a("div",[t._v("\n                    您的密码已修改成功\n                  ")]):t._e(),t._v(" "),"qachanged"===e.row.action_type?a("div",[t._v("\n                    您的验证问题已修改成功\n                  ")]):t._e()]:t._e(),t._v(" "),"user"==e.row.msg_type?["addmember"===e.row.action_type?a("div",[a("avatar",{attrs:{headIcon:e.row.from.user_headicon,name:e.row.from.user_abbr,bgColor:e.row.from.user_backcolor,size:"mini"}}),t._v("\n                    "+t._s(e.row.from.user_name)+"\n                    邀请您加入课题\n                    "),a("span",{staticClass:"subject-link",on:{click:function(a){return t.handleMessage(e.row.target.id,e.row.id,e.row.action_type)}}},[t._v("《 "+t._s(e.row.target.title)+"》")])],1):t._e(),t._v(" "),"removemember"===e.row.action_type?a("div",[t._v("\n                    "+t._s(e.row.target.title)+"管理员已将您移出该课题\n                  ")]):t._e(),t._v(" "),"banmember"===e.row.action_type?a("div",[t._v("\n                    "+t._s(e.row.target.title)+"管理员已将您禁言\n                  ")]):t._e(),t._v(" "),"unbanmember"===e.row.action_type?a("div",[t._v("\n                    "+t._s(e.row.target.title)+"管理员已解除您的禁言\n                  ")]):t._e()]:t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"ptime",label:"消息推送时间"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticStyle:{"margin-right":"40px"}},[t._v("  "+t._s(1==e.row.status?"未读":"已读")+" ")]),t._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.del(e.row.id)}}},[t._v("\n                  删除\n                ")])]}}])})],1),t._v(" "),a("el-pagination",{staticStyle:{"margin-top":"20px"},attrs:{background:"",layout:"prev, pager, next,sizes,  jumper",total:t.message.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)])],1)},n=[],i=(a("f763"),a("cb39")),r=a("77c0"),o={name:"MessageList",components:{BreadcrumbBox:i["a"],Avatar:r["a"]},data:function(){return{message:{total:1,new_count:"",list:[]},activeName:0}},mounted:function(){this.messageList({page:1,limit:10,status:0})},methods:{handleMessage:function(t,e,a){var s=this;"addmember"===a&&(this.$store.dispatch("message/setread",{id:e}).then(function(){s.$store.dispatch("message/hasnew")}),this.$router.push("/studio?id="+t+"&fromPage=MessageList"))},batchIsRead:function(){var t=this,e=this.message.list,a="";e.forEach(function(t){1===t.status&&(a+=t.id+",")}),a?this.$store.dispatch("message/setread",{id:a}).then(function(e){t.messageList({page:1,limit:10,status:t.activeName}),t.$message({message:"批量已读操作成功",type:"success"})}):this.$message({message:"无需要批量操作已读消息",type:"warn"})},batchDel:function(){var t=this,e=this.message.list,a="";e.forEach(function(t){a+=t.id+","}),a?this.$store.dispatch("message/remove",{id:a}).then(function(e){t.messageList({page:1,limit:10,status:t.activeName}),t.$message({message:"批量删除操作消息成功",type:"success"})}):this.$message({message:"无需要批量删除操作消息",type:"warn"})},change:function(t){this.messageList({page:1,limit:10,status:t})},handleSizeChange:function(t){this.messageList({page:1,limit:t,status:this.activeName})},handleCurrentChange:function(t){this.messageList({page:t,limit:10,status:this.activeName})},messageList:function(t){var e=this;this.$store.dispatch("message/list",t).then(function(t){e.message=t.data,e.$store.dispatch("message/hasnew")})},del:function(t){var e=this;this.$store.dispatch("message/remove",{id:t}).then(function(t){e.messageList({page:1,limit:10,status:e.activeName})})}}},c=o,l=(a("1428"),a("17cc")),m=Object(l["a"])(c,s,n,!1,null,"14d76adb",null);e["default"]=m.exports}}]);
//# sourceMappingURL=chunk-185f4bab.b5df9987.js.map